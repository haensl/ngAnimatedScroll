!function(){"use strict";angular.module("AnimatedScroll",[]).factory("animatedScroll",["$q","$timeout",function(e,n){!function(){for(var e=0,n=["ms","moz","webkit","o"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,t){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),i=window.setTimeout(function(){n(r+o)},o);return e=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var t={DURATION:800,OFFSET:0,EASING_PATTERN:"easeInOutQuart",TIME_PER_FRAME:16,SCROLL_ELEMENT:window},r={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}},o=function(e){return r[e]?r[e]:function(){return time}},i=function(e,n){for(var t=e.offsetTop-e.clientHeight,r=e.offsetParent;r;)t-=r.offsetTop,r=r.offsetParent;return t=Math.max(t-n,0)},a=function(e){return e===window?window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop:e.scrollTop},u=function(){return new Error("Invalid parameter: element must either be an angular.element, Element or a valid selector string!")},c=function(e){return e===window?function(e){window.scroll(0,e)}:function(n){e.scrollTop=n}};return{scroll:function(r,l){var s=e.defer();if(!r)return s.reject(new Error("Missing parameter: element is not defined!")),s.promise;if("string"==typeof r){var m=document.querySelector(r);if(!m)return s.reject(u()),s.promise;r=m}else if(!(r instanceof Element||r instanceof angular.element))return s.reject(u()),s.promise;l=l||{};var f=parseInt(l.duration,10)||t.DURATION,w=parseInt(l.offset,10)||t.OFFSET,d="string"==typeof l.easing?l.easing:t.EASING_PATTERN,E=t.SCROLL_ELEMENT;if(l.scrollElement instanceof Element||l.scrollElement instanceof angular.element)E=l.scrollElement instanceof angular.element?l.scrollElement[0]:l.scrollElement;else if("string"==typeof l.scrollElement){var m=document.querySelector(l.scrollElement);m&&(E=m)}r instanceof angular.element&&(r=r[0]);var A,T,g,p,F,I,O=o(d),v=0,q=c(E),Q=a(E),R=i(r,w),S=R-Q,N=function(){F=window.requestAnimationFrame(N),p=Date.now(),v+=p-(g||p),g=p,A=v/f||0,A>1&&(A=1),T=a(E),I=Q+S*O(A),q(I),I!==R&&T!==R||(window.cancelAnimationFrame(F),n(function(){s.resolve(r)}))};return N(),s.promise}}}])}();